parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"xojO":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.W=0]="W",e[e.A=1]="A",e[e.S=2]="S",e[e.D=3]="D"}(e=exports.KeyboardKey||(exports.KeyboardKey={}));var t={W:e.W,A:e.A,S:e.S,D:e.D},r=function(){function e(){this.isBind=!1,this.pressedArray=[],console.debug("KeyboardController Ctor")}return e.prototype.bind=function(){if(this.isBind)throw new Error("Keyboard bind twice");console.debug("KeyboardController bind"),this.isBind=!0,document.addEventListener("keydown",this.onKeyDown.bind(this)),document.addEventListener("keyup",this.onKeyUp.bind(this))},e.prototype.isPressed=function(e){return this.pressedArray.includes(e)},e.prototype.onKeyDown=function(e){var r=e.key.toUpperCase();void 0!==t[r]&&this.setPressed(t[r])},e.prototype.onKeyUp=function(e){var r=e.key.toUpperCase();void 0!==t[r]&&this.setNotPressed(t[r])},e.prototype.setPressed=function(e){this.pressedArray.indexOf(e)>=0||this.pressedArray.push(e)},e.prototype.setNotPressed=function(e){var t=this.pressedArray.indexOf(e);t<0||this.pressedArray.splice(t,1)},e}(),s=new r;exports.default=s;
},{}],"qwST":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CANVAS_WIDTH=500,exports.CANVAS_HEIGHT=500,exports.MAX_ROUND_ERROR=1e-4;
},{}],"zyOE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,n){"number"==typeof t?(this.v1=t,this.v2=n):(this.p1=t,this.p2=n,this.v1=n.x-t.x,this.v2=n.y-t.y)}return t.fromRotation=function(n,i){return new t(Math.cos(i),Math.sin(i)).scale(n)},Object.defineProperty(t.prototype,"magnitude",{get:function(){return this._magnitude||(this._magnitude=Math.sqrt(this.v1*this.v1+this.v2*this.v2)),this._magnitude},enumerable:!0,configurable:!0}),t.prototype.equals=function(t){return this.v1===t.v1&&this.v2===t.v2},t.prototype.dot=function(t){return this.v1*t.v1+this.v2*t.v2},t.prototype.rotate=function(n){var i=Math.cos(-n),e=Math.sin(-n);return new t(i*this.v1-e*this.v2,e*this.v1+i*this.v2)},t.prototype.invert=function(){return new t(-this.v1,-this.v2)},t.prototype.scale=function(n){return new t(this.v1*n,this.v2*n)},t.prototype.unit=function(){return 0===this.magnitude?n:new t(this.v1/this.magnitude,this.v2/this.magnitude)},t.prototype.clamp=function(t,n){var i=t,e=n||null;return void 0===n&&(i=null,e=t),null!==e&&this.magnitude>e?this.unit().scale(e):null!==i&&this.magnitude<i?this.unit().scale(i):this},t.prototype.add=function(n){return new t(this.v1+n.v1,this.v2+n.v2)},t.prototype.projection=function(t){return this.dot(t)/t.magnitude},t.prototype.xComponent=function(){return this.projection(i)},t.prototype.yComponent=function(){return this.projection(e)},t.prototype.toString=function(){return"("+this.v1+", "+this.v2+")"},t}();exports.default=t;var n=new t(0,0),i=new t(1,0),e=new t(0,1);
},{}],"mHi6":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var n=t(require("./vector")),r=function(){function t(t,n){this.x=t,this.y=n}return t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t.prototype.distanceTo=function(t){var n=t.x-this.x,r=t.y-this.y;return Math.sqrt(n*n+r*r)},t.prototype.translate=function(r,e){return r instanceof n.default?new t(this.x+r.v1,this.y+r.v2):new t(this.x+r,this.y+e)},t.prototype.clampX=function(t,n){var r=t;return void 0===n&&(r=null,n=t),this.clamp(r,n,null,null)},t.prototype.clampY=function(t,n){var r=t;return void 0===n&&(r=null,n=t),this.clamp(null,null,r,n)},t.prototype.clamp=function(n,r,e,u){var i=n,o=r,l=e,s=u,a=this.x,p=this.y;return void 0===e&&void 0===u&&(i=null,l=null,o=n,s=r),null!==i&&a<i?a=i:null!==o&&a>o&&(a=o),null!==l&&p<l?p=l:null!==s&&p>s&&(p=s),new t(a,p)},t.prototype.findClosest=function(t){var n=this;if(0===t.length)return null;if(1===t.length)return t[0];var r=-1;return t.map(function(t){return n.distanceTo(t)}).reduce(function(t,n,e){return n<t?(r=e,n):t},1/0),t[r]},t.prototype.toString=function(){return"("+this.x+", "+this.y+")"},t}();exports.default=r;
},{"./vector":"zyOE"}],"JwFJ":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var n=t(require("./point")),i=t(require("./vector")),e=require("./constants"),r=1,u=function(){function t(t,n){this.p1=t,this.p2=n,Math.abs(n.x-t.x)<e.MAX_ROUND_ERROR?(this.m=null,this.n=t.x):(this.m=(n.y-t.y)/(n.x-t.x),this.n=t.y-this.m*t.x)}return t.prototype.collisionWithUnlimited=function(t){if(this.m===t.m)return null;if(null===this.m||null===t.m){var i=this,e=t;if(null===i.m){var r=e;e=this,i=r}var u=(l=e.n)*i.m+i.n;return new n.default(l,u)}var l;u=(l=(t.n-this.n)/(this.m-t.m))*this.m+this.n;return new n.default(l,u)},t.prototype.collidesWithLine=function(t){var n=this.collisionWithUnlimited(t);if(!n)return null;var e=new i.default(this.p1,this.p2),r=e.dot(e),u=e.dot(new i.default(this.p1,n));if(u<0)return null;if(u>r)return null;var l=new i.default(t.p1,t.p2),s=l.dot(l),o=l.dot(new i.default(t.p1,n));return 0===o?t.p1:s===o?t.p2:o<0?null:o<s?n:null},t.prototype.containsPoint=function(t){var n=new i.default(this.p1,this.p2),e=n.dot(n),r=n.dot(new i.default(this.p1,t));return 0===r||r===e||!(r<0)&&r<e},t}();exports.default=u;
},{"./point":"mHi6","./vector":"zyOE","./constants":"qwST"}],"wZiP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(){}return e.prototype.logic=function(e){},e}();exports.default=e;
},{}],"nQjO":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var i=e(require("../line")),n=e(require("./geometry2d")),r=function(e){function n(t,n,r){var o=e.call(this)||this;o.origin=t,o.width=n,o.height=r;var l=o.origin,s=o.origin.translate(o.width,0),u=o.origin.translate(0,o.height),h=o.origin.translate(o.width,o.height);return o.tl=new i.default(l,s),o.rl=new i.default(s,h),o.bl=new i.default(u,h),o.ll=new i.default(l,u),o}return t(n,e),n.prototype.draw=function(t){t.save(),t.strokeStyle="#0FF",t.strokeRect(this.origin.x,this.origin.y,this.width,this.height),t.restore()},n.prototype.collidesWithLine=function(t){var e=[null,null,null,null];return e[0]=t.collidesWithLine(this.tl),e[1]=t.collidesWithLine(this.rl),e[2]=t.collidesWithLine(this.bl),e[3]=t.collidesWithLine(this.ll),t.p1.findClosest(e.filter(function(t){return null!==t}))},n}(n.default);exports.default=r;
},{"../line":"JwFJ","./geometry2d":"wZiP"}],"kZYF":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("../vector")),n=e(require("./geometry2d")),o=function(e){function n(t,r){var n=e.call(this)||this;return n.center=t,n.r=r,n}return t(n,e),n.prototype.draw=function(t){t.save(),t.strokeStyle="#00F",t.beginPath(),t.arc(this.center.x,this.center.y,this.r,0,2*Math.PI),t.stroke(),t.restore()},n.prototype.collidesWithLine=function(t){var e=new r.default(t.p1,t.p2),n=e.unit(),o=new r.default(t.p1,this.center),i=e.dot(o)/e.magnitude,s=t.p1.translate(n.scale(i)),a=this.center.distanceTo(s);if(a>this.r)return null;if(Math.abs(a-this.r)<3&&t.containsPoint(s))return s;var u=Math.sqrt(this.r*this.r-a*a),c=s.translate(n.scale(u)),f=s.translate(n.scale(-u));return t.p1.findClosest([c,f].filter(function(e){return t.containsPoint(e)}))},n}(n.default);exports.default=o;
},{"../vector":"zyOE","./geometry2d":"wZiP"}],"UG55":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var i=e(require("./keyboardController")),r=t(require("./vector")),s=require("./constants"),o=new r.default(0,0),n=new r.default(0,-1),l=new r.default(1,0),a=new r.default(0,1),d=new r.default(-1,0),u=5,f=(u-1)/2,p=10,c=function(){function e(e){this.position=e,this.acceleration=o,this.speed=o}return e.prototype.logic=function(e){var t=o;i.default.isPressed(i.KeyboardKey.W)&&(t=t.add(n)),i.default.isPressed(i.KeyboardKey.D)&&(t=t.add(l)),i.default.isPressed(i.KeyboardKey.S)&&(t=t.add(a)),i.default.isPressed(i.KeyboardKey.A)&&(t=t.add(d)),this.speed=t.unit().scale(p),this.position=this.position.translate(this.speed).clamp(f,s.CANVAS_WIDTH-f,f,s.CANVAS_HEIGHT-f)},e.prototype.draw=function(e){e.fillStyle="#000",e.fillRect(this.position.x-f,this.position.y-f,u,u),e.fillStyle="#0FF",e.fillRect(this.position.x,this.position.y,1,1)},e.prototype.collidesWithLine=function(e){return null},e}();exports.default=c;
},{"./keyboardController":"xojO","./vector":"zyOE","./constants":"qwST"}],"Ho35":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var n=t(require("./geometry2d")),r=t(require("~js/line")),i=t(require("~js/vector")),s=function(t){function n(e,n,s,o){var l=t.call(this)||this;if(n<3)throw new Error("Polygons must have at least 3 sides");l.center=e,l.sides=n,l.sideLength=s,l.rotation=o,l.lines=[];for(var a=Math.PI*(l.sides-2)/l.sides,u=l.center.translate(-l.sideLength/2,-l.sideLength/(2*Math.tan(Math.PI/l.sides))),h=new i.default(l.sideLength,0),c=Math.PI-a;l.lines.length<l.sides;){var f=u.translate(h);l.lines.push(new r.default(u,f)),u=f,h=h.rotate(-c)}return l}return e(n,t),n.prototype.draw=function(e){e.save(),e.strokeStyle="#ce033a",e.beginPath(),e.moveTo(this.lines[0].p1.x,this.lines[0].p1.y);for(var t=1;t<this.lines.length;t++)e.lineTo(this.lines[t].p1.x,this.lines[t].p1.y);e.lineTo(this.lines[0].p1.x,this.lines[0].p1.y),e.stroke(),e.restore()},n.prototype.collidesWithLine=function(e){var t=this.lines.map(function(t){return e.collidesWithLine(t)});return e.p1.findClosest(t.filter(function(e){return null!==e}))},n}(n.default);exports.default=s;
},{"./geometry2d":"wZiP","~js/line":"JwFJ","~js/vector":"zyOE"}],"RGUf":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./keyboardController")),r=require("./constants"),n=e(require("./geometry/square")),l=e(require("./point")),a=e(require("./vector")),i=e(require("./line")),o=e(require("./geometry/circle")),u=e(require("./character")),d=e(require("./geometry/regularPolygon")),f=!0;window.addEventListener("load",function(){console.debug("Init main"),t.default.bind();var e=document.getElementById("canvas").getContext("2d"),s=-1,c=new u.default(new l.default(150,150)),v=[new n.default(new l.default(200,200),100,100),new o.default(new l.default(100,100),50),new d.default(new l.default(300,100),6,20,0),c];function w(t){var n=0;s>0&&(n=t-s),s=t;for(var l=0,o=v;l<o.length;l++){o[l].logic(n)}e.clearRect(0,0,r.CANVAS_WIDTH,r.CANVAS_HEIGHT),e.save();for(var u=0,d=v;u<d.length;u++){d[u].draw(e)}!function(t,n,l,o){o||(o=new a.default(1,0));e.save(),e.strokeStyle="#0F05",e.lineWidth=1,e.fillStyle="rgba(100, 100, 100, 0.5)";for(var u=2*Math.PI/n,d=null,f=null,s=0;s<n;s++){for(var w=s*u,y=o.rotate(w),g=t.translate(y.scale(l)).clamp(r.CANVAS_WIDTH,r.CANVAS_HEIGHT),m=null,T=1/0,q=0,h=v;q<h.length;q++){var x=h[q];if(x!==c){var A=x.collidesWithLine(new i.default(t,g));if(A){var _=t.distanceTo(A);_<T&&(m=A,T=_)}}}m&&(g=m),f?(e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(f.x,f.y),e.lineTo(g.x,g.y),e.lineTo(t.x,t.y),e.fill()):d=g,f=g}e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(f.x,f.y),e.lineTo(d.x,d.y),e.lineTo(t.x,t.y),e.fill(),e.restore()}(c.position,360,200),f&&window.requestAnimationFrame(w)}window.requestAnimationFrame(w)});
},{"./keyboardController":"xojO","./constants":"qwST","./geometry/square":"nQjO","./point":"mHi6","./vector":"zyOE","./line":"JwFJ","./geometry/circle":"kZYF","./character":"UG55","./geometry/regularPolygon":"Ho35"}]},{},["RGUf"], null)
//# sourceMappingURL=main.833bf9d6.js.map